import pygame
import sys

# Initialisation de Pygame
pygame.init()

# Paramètres de la fenêtre
largeur, hauteur = 800, 600
ecran = pygame.display.set_mode((largeur, hauteur))
pygame.display.set_caption('Fond qui bouge avec un sprite')

# Couleurs
NOIR = (0, 0, 0)

# Charger l'image de fond
fond = pygame.image.load('fond.jpg')
fond_rect = fond.get_rect()

# Classe pour le sprite
class Sprite(pygame.sprite.Sprite):
    def __init__(self):
        super().__init__()
        self.image = pygame.Surface((50, 50))
        self.image.fill((255, 0, 0))  # Rouge pour le sprite (vous pouvez remplacer cela par votre propre image)
        self.rect = self.image.get_rect()
        self.rect.center = (largeur // 2, hauteur // 2)
        self.vitesse = 5  # Vitesse de déplacement du sprite

    def update(self):
        touches = pygame.key.get_pressed()
        if touches[pygame.K_LEFT]:
            self.rect.x -= self.vitesse
        if touches[pygame.K_RIGHT]:
            self.rect.x += self.vitesse
        if touches[pygame.K_UP]:
            self.rect.y -= self.vitesse
        if touches[pygame.K_DOWN]:
            self.rect.y += self.vitesse

# Créer une instance du sprite
sprite = Sprite()

# Groupe de sprites
tous_les_sprites = pygame.sprite.Group()
tous_les_sprites.add(sprite)

# Boucle principale du jeu
while True:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            pygame.quit()
            sys.exit()

    # Mise à jour du sprite
    tous_les_sprites.update()

    # Mettre à jour la position du fond en fonction du mouvement du sprite
    decalage_x = (largeur // 2) - sprite.rect.centerx
    decalage_y = (hauteur // 2) - sprite.rect.centery
    fond_rect.x += decalage_x
    fond_rect.y += decalage_y

    # Effacer l'écran
    ecran.fill(NOIR)

    # Afficher le fond
    ecran.blit(fond, fond_rect)

    # Afficher le sprite
    tous_les_sprites.draw(ecran)

    # Mise à jour de l'écran
    pygame.display.flip()
