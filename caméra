import pygame
import sys

# Initialisation de Pygame
pygame.init()

# Définition de la résolution de l'écran
resolution = (1080, 720)
screen = pygame.display.set_mode(resolution)
pygame.display.set_caption("Mon Super Jeu")

# Chargement et mise à l'échelle de l'image de fond
background = pygame.image.load('assets/bg.png')
background = pygame.transform.scale(background, resolution)

# Définition des couleurs
white = (255, 255, 255)

# Définition des caractéristiques du personnage
player_width = 50
player_height = 50
player_x = resolution[0] // 2 - player_width // 2
player_y = resolution[1] - player_height
player_speed = 5
jump_height = 10
gravity = 1
camera_speed = 5
camera_x = 1080

# Définition des variables pour la génération dynamique du fond
background_width = background.get_width()
background_x = 0

# Boucle de jeu
clock = pygame.time.Clock()

while True:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            pygame.quit()
            sys.exit()

    keys = pygame.key.get_pressed()

    # Déplacement du personnage
    if keys[pygame.K_LEFT] and player_x > 0:
        player_x -= player_speed
    if keys[pygame.K_RIGHT] and player_x < resolution[0] - player_width:
        player_x += player_speed

    # Saut du personnage
    if keys[pygame.K_SPACE] and player_y == resolution[1] - player_height:
        player_y -= jump_height

    # Application de la gravité
    if player_y < resolution[1] - player_height:
        player_y += gravity0

    # Génération dynamique du fond
    if player_x > 800 :
        background_x -= player_speed
    elif player_x <200:
        background_x += player_speed

    if background_x < -background_width:
        background_x += background_width
    elif background_x > -background_width:
        background_x -= background_width

    # Affichage du fond
    screen.blit(background, (background_x, 0))
    screen.blit(background, (background_x + background_width, 0))

    # Affichage du personnage
    pygame.draw.rect(screen, white, (player_x, player_y, player_width, player_height))

    # Mise à jour de l'écran
    pygame.display.flip()

    # Limite de vitesse de la boucle de jeu
    clock.tick(60)
